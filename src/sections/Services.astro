---
import ContentWidth from "../components/ui/ContentWidth.astro";

const { id = "problemas" } = Astro.props;

const problems = [
  { title: "Imagen borrosa", description: "Falta de nitidez, lentes sucios o lámpara agotada.", icon: "focus", tag: "Frecuente" },
  { title: "Puntos en pantalla", description: "Puntos blancos o negros por daño en chip DMD o polvo.", icon: "pixels" },
  { title: "Sin señal / HDMI", description: "No reconoce entradas de video o puertos dañados.", icon: "signal" },
  { title: "Lámpara fundida", description: "Fin de vida útil, error de balastro o explosión interna.", icon: "lamp", tag: "Urgente" },
  { title: "Sobrecalentamiento", description: "Limpieza profunda de ventiladores y cambio de pasta térmica.", icon: "heat", tag: "Mantenimiento" },
  { title: "Apagado repentino", description: "Fallos en la fuente de poder o sensores de temperatura.", icon: "power" },
];

const toSlug = (t) => t.toLowerCase().replace(/[^a-z0-9]+/g, "-");
const WHATSAPP_BASE = "https://wa.me/51941801827?text=Hola,%20tengo%20un%20problema%20con%20mi%20proyector:%20";
---

<section id={id} class="py-24 text-white scroll-mt-24">
  <ContentWidth>
    <div class="flex flex-col lg:flex-row lg:items-end justify-between gap-8 mb-16">
      <header class="max-w-2xl">
        <div class="flex items-center gap-2 mb-4">
          <span class="h-px w-8 bg-yellow-400"></span>
          <span class="text-yellow-400 font-bold text-xs uppercase tracking-[0.3em]">Centro de Diagnóstico</span>
        </div>
        <h2 class="text-4xl md:text-6xl font-black tracking-tight uppercase leading-none">
          ¿Qué le sucede a <br/> <span class="text-yellow-400">tu proyector?</span>
        </h2>
      </header>
      <p class="text-gray-400 max-w-sm text-lg leading-relaxed border-l border-white/10 pl-6">
        Identifica la falla común y recibe una <span class="text-white font-bold">solución inmediata</span> con repuestos originales.
      </p>
    </div>

    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {problems.map((p) => (
        <a
          href={`${WHATSAPP_BASE}${encodeURIComponent(p.title)}`}
          target="_blank"
          class="group relative block overflow-hidden rounded-3xl border border-white/5 bg-[#0a0a0a] p-8 transition-all duration-500 hover:border-yellow-400/40"
        >
          <div class="absolute -right-16 -top-16 h-40 w-40 rounded-full bg-yellow-400/10 blur-[80px] transition-opacity opacity-0 group-hover:opacity-100"></div>

          <div class="flex items-start justify-between relative z-10">
            <div class="flex h-14 w-14 items-center justify-center rounded-2xl bg-white/5 text-yellow-400 group-hover:bg-yellow-400 group-hover:text-black transition-all duration-500 shadow-xl group-hover:shadow-yellow-400/20 group-hover:-rotate-3">
              {p.icon === "focus" && (
                <svg width="28" height="28" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M3 12h2m14 0h2M12 3v2m0 14v2"/></svg>
              )}
              {p.icon === "lamp" && (
                <svg width="28" height="28" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M12 2v2m0 16v2M4.9 4.9l1.4 1.4m11.4 11.4l1.4 1.4M2 12h2m16 0h2M6.3 17.7l-1.4 1.4M19.1 4.9l-1.4 1.4M12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10z"/></svg>
              )}
              {p.icon === "heat" && (
                <svg width="28" height="28" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M12 2v14m0 0a4 4 0 1 0 0 8 4 4 0 0 0 0-8z"/></svg>
              )}
              {p.icon === "signal" && (
                <svg width="28" height="28" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M2 12h5m10 0h5M7.5 7l9 10M16.5 7l-9 10"/></svg>
              )}
              {p.icon === "pixels" && (
                <svg width="28" height="28" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/><rect x="14" y="3" width="4" height="4" rx="1"/><rect x="3" y="14" width="4" height="4" rx="1"/></svg>
              )}
              {p.icon === "power" && (
                <svg width="28" height="28" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path d="M18.36 6.64a9 9 0 1 1-12.73 0M12 2v10"/></svg>
              )}
            </div>

            {p.tag && (
              <span class="text-[9px] font-black uppercase tracking-[0.2em] text-yellow-400 bg-yellow-400/5 px-3 py-1.5 rounded-lg border border-yellow-400/20">
                {p.tag}
              </span>
            )}
          </div>

          <div class="relative z-10">
            <h3 class="mt-10 text-2xl font-bold text-white group-hover:text-yellow-400 transition-colors tracking-tight">
              {p.title}
            </h3>

            <p class="mt-3 text-sm leading-relaxed text-gray-500 group-hover:text-gray-400 transition-colors">
              {p.description}
            </p>

            <div class="mt-8 pt-6 border-t border-white/5 flex items-center justify-between">
              <div class="flex items-center gap-1.5">
                <span class="h-1.5 w-1.5 rounded-full bg-yellow-400 shadow-[0_0_8px_rgba(250,204,21,0.6)]"></span>
                <span class="text-[10px] font-bold uppercase tracking-widest text-gray-500 group-hover:text-gray-300 transition-colors">Consulta técnica</span>
              </div>
              <div class="overflow-hidden">
                    <span class="text-xs font-black uppercase tracking-widest text-yellow-400 flex items-center gap-2 transform translate-y-0 group-hover:-translate-y-0 transition-transform">
                        Cotizar <svg class="w-4 h-4 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg>
                    </span>
              </div>
            </div>
          </div>
        </a>
      ))}
    </div>
  </ContentWidth>
</section>